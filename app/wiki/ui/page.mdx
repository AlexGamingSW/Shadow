import Box from 'components/Box'
import styles from './page.module.css'

# The UI System

<Box>
The UI system, while being a bit complicated, is very powerful.
It allows you to create custom UIs such as menus, HUDs, and more.
</Box>

<Box>
## The Basics

---

A UI is made up of **components**. A component is a single piece of the UI. Think of them as [objects](/wiki/objects), but more advanced.

Let's take the main menu as an example. The soul is a component, each menu item is a component, and the Kristal logo is a component.

Components all do different things, and are all used in different ways.
You can even __create your own components__ if required, which is more than likely.

There are many types of components, but they all have a few things in common:
- They all have a parent, except for the **root component**.
- They can all have children, like any other object.
- They all have sizings.
- They all have margins and paddings.

But what do these things mean, exactly?
</Box>

<Box>
## The Anatomy of a Component

---

### Margins and Paddings

As stated before, components have **margins** and **paddings**.
What are these things, and why do *all* components have them?

The answer becomes quite clear when you remember that components can have children. Margins and paddings are used to space out components from each other.

A component is a box.
A margin is the space between the box and other boxes, and a padding is the space between the box and its contents.
Margins and paddings can be different for each side, as well.

In the following image, both the margins and the paddings are 20 pixels on each side.
The cyan area represents the margins, and the pink area represents the paddings. The white box is the component itself.

![](/wiki/margins_and_paddings.png)

In Kristal, turning on **debug rendering** will show you the margins and paddings of each component.

---

### Sizings

Sizings determine the size of a component. There's a horizontal sizing and a vertical sizing.

#### [`FixedSizing(number size, number? size_2)`](/wiki/api/FixedSizing)
This sizing is simple. It makes the component a fixed size which will not change.

If `size_2` is provided, the sizing will assume that `size` is the width and `size_2` is the height.

This means that `FixedSizing(100, 100)` is the same as `FixedSizing(100)`.

#### [`FillSizing()`](/wiki/api/FillSizing)
This sizing makes the component "fill" the parent component -- it will be the same size as the parent,
minus any paddings the parent has, and minus any margins the component has.

#### [`FitSizing()`](/wiki/api/FitSizing)
This sizing makes the component shrink or grow to fit to its contents.

---

An example of using both `FillSizing` and `FitSizing` is a menu item.

You'd want the menu item to stretch horizontally to fit the menu, but you'd want the height to be the same as whatever's inside the menu item, such as text.

![](/wiki/menu_option_example.png)

---

### Layouts

Basically, a layout is a way to position child components inside of a component.

There's two different layout types, [`HorizontalLayout`](/wiki/api/HorizontalLayout) and [`VerticalLayout`](/wiki/api/VerticalLayout).
When creating a layout, you're able to specify options for it, like the gap between components, or the alignment.

There's six alignment modes:
- `"start"`: Aligns the components to the start of the component.
- `"center"`: Aligns the components to the center of the component.
- `"end"`: Aligns the components to the end of the component.
- `"space-between"`: Aligns the components evenly. The first and last components are flush with the start and end of the layout.
- `"space-around"`: Aligns the components evenly. Acts as if there's invisible spacing around each component.
- `"space-evenly"`: Aligns the components evenly. The same spacing is used everywhere, including the first and last components.

That's a bit confusing, so here's visual examples:

<div style={{display: "flex", flexWrap: "wrap", justifyContent: "center"}}>

<div>
#### `"start"`
![](/wiki/alignment_start.png)
</div>

<div>
#### `"center"`
![](/wiki/alignment_center.png)
</div>

<div>
#### `"end"`
![](/wiki/alignment_end.png)
</div>

<div>
#### `"space-between"`
![](/wiki/alignment_space_between.png)
</div>

<div>
#### `"space-around"`
![](/wiki/alignment_space_around.png)
</div>

<div>
#### `"space-evenly"`
![](/wiki/alignment_space_evenly.png)
</div>

</div>

---

Finally, it's time to make something!
</Box>

<Box>
## Making a new UI
---

Just kidding! We're not ready to make something yet.

Wait. Nevermind. We are.

---

Making a UI is simple. You just need to create a component, and then add it somewhere.

If you're in the overworld, add it to [`Game.world`](/wiki/api/Game#world)! In a battle, try [`Game.battle`](/wiki/api/Game#battle).

If it can be *anywhere*, at *any time*, try [`Game.stage`](/wiki/api/Game#stage).

Now, once you've created your component, and added it to something, you just need to focus it.

```lua
local root = Component(FixedSizing(640, 480)) -- The root should be a fixed size.
root:setLayout(VerticalLayout({ gap = 0, align = "center" })) -- Center it vertically!
root:addChild(Text("Hello, world!")) -- Add a text object to it!
Game.stage:addChild(root) -- Add it to the world!
```

Assuming you run this in a black void, you should see the following result:

![](/wiki/hello_world.png)

Perfect! Our component is 640x480, and the child is centered vertically!

Turning on debug rendering will help a little in understanding what's going on:

![](/wiki/hello_world_debug.png)

</Box>